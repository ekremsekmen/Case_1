2025-09-21 22:49:42.130 +03:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "ProductDb_Dev";
2025-09-21 22:49:42.225 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Products" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Description" character varying(500),
    "Price" numeric(18,2) NOT NULL,
    "Stock" integer NOT NULL,
    "Category" character varying(50),
    "CreatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    "UpdatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    CONSTRAINT "PK_Products" PRIMARY KEY ("Id")
);
2025-09-21 22:49:42.227 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Username" character varying(100) NOT NULL,
    "Email" character varying(255) NOT NULL,
    "PasswordHash" text NOT NULL,
    "FirstName" character varying(100),
    "LastName" character varying(100),
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    "UpdatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-09-21 22:49:42.229 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "RefreshTokens" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Token" text NOT NULL,
    "ExpiryDate" timestamp with time zone NOT NULL,
    "IsRevoked" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL DEFAULT (CURRENT_TIMESTAMP),
    "UserId" integer NOT NULL,
    CONSTRAINT "PK_RefreshTokens" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_RefreshTokens_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-09-21 22:49:42.230 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Category", "CreatedAt", "Description", "Name", "Price", "Stock", "UpdatedAt")
VALUES (1, 'Electronics', TIMESTAMPTZ '2025-09-21T19:49:41.884694Z', 'This is a sample product for testing', 'Sample Product 1', 29.99, 100, TIMESTAMPTZ '2025-09-21T19:49:41.884704Z');
INSERT INTO "Products" ("Id", "Category", "CreatedAt", "Description", "Name", "Price", "Stock", "UpdatedAt")
VALUES (2, 'Books', TIMESTAMPTZ '2025-09-21T19:49:41.884715Z', 'Another sample product', 'Sample Product 2', 49.99, 50, TIMESTAMPTZ '2025-09-21T19:49:41.884715Z');
2025-09-21 22:49:42.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_RefreshTokens_UserId" ON "RefreshTokens" ("UserId");
2025-09-21 22:49:42.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Users_Email" ON "Users" ("Email");
2025-09-21 22:49:42.232 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Users_Username" ON "Users" ("Username");
2025-09-21 22:49:42.234 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('"Products"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Products") + 1,
        nextval(pg_get_serial_sequence('"Products"', 'Id'))),
    false);
2025-09-21 22:49:42.240 +03:00 [INF] User profile is available. Using '/Users/ekremsekmen/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-09-21 22:49:42.244 +03:00 [INF] Creating key {5938ed5b-0fb6-4384-ad6d-fc10ae2f459d} with creation date 2025-09-21 19:49:42Z, activation date 2025-09-21 19:49:42Z, and expiration date 2025-12-20 19:49:42Z.
2025-09-21 22:49:42.246 +03:00 [WRN] No XML encryptor configured. Key {5938ed5b-0fb6-4384-ad6d-fc10ae2f459d} may be persisted to storage in unencrypted form.
2025-09-21 22:49:42.248 +03:00 [INF] Writing data to file '/Users/ekremsekmen/.aspnet/DataProtection-Keys/key-5938ed5b-0fb6-4384-ad6d-fc10ae2f459d.xml'.
2025-09-21 22:49:42.262 +03:00 [INF] Now listening on: http://localhost:5125
2025-09-21 22:49:42.263 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-21 22:49:42.263 +03:00 [INF] Hosting environment: Development
2025-09-21 22:49:42.263 +03:00 [INF] Content root path: /Users/ekremsekmen/mycodes/Case_1_2
2025-09-21 22:53:38.426 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/api/products - null null
2025-09-21 22:53:38.438 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-21 22:53:38.449 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 22:53:38.455 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Case_1_2.Core.Application.DTOs.ProductDto]]] GetProducts() on controller Case_1_2.API.Controllers.ProductsController (Case_1_2).
2025-09-21 22:53:38.493 +03:00 [INF] Getting all products
2025-09-21 22:53:38.502 +03:00 [INF] Products not found in cache, retrieving from database
2025-09-21 22:53:38.601 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."Stock", p."UpdatedAt"
FROM "Products" AS p
ORDER BY p."Name"
2025-09-21 22:53:38.657 +03:00 [INF] Products cached for 5 minutes
2025-09-21 22:53:38.659 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Case_1_2.Core.Application.DTOs.ProductDto, Case_1_2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-21 22:53:38.664 +03:00 [INF] Executed action Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2) in 208.7225ms
2025-09-21 22:53:38.665 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 22:53:38.667 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/api/products - 200 null application/json; charset=utf-8 241.6464ms
2025-09-21 22:53:47.354 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/api/products/1 - null null
2025-09-21 22:53:47.355 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.ProductsController.GetProduct (Case_1_2)'
2025-09-21 22:53:47.359 +03:00 [INF] Route matched with {action = "GetProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.ProductDto]] GetProduct(Int32) on controller Case_1_2.API.Controllers.ProductsController (Case_1_2).
2025-09-21 22:53:47.362 +03:00 [INF] Getting product with ID: 1
2025-09-21 22:53:47.363 +03:00 [INF] Product 1 not found in cache, retrieving from database
2025-09-21 22:53:47.396 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."Stock", p."UpdatedAt"
FROM "Products" AS p
WHERE p."Id" = @__id_0
LIMIT 1
2025-09-21 22:53:47.397 +03:00 [INF] Product 1 cached for 10 minutes
2025-09-21 22:53:47.397 +03:00 [INF] Executing OkObjectResult, writing value of type 'Case_1_2.Core.Application.DTOs.ProductDto'.
2025-09-21 22:53:47.398 +03:00 [INF] Executed action Case_1_2.API.Controllers.ProductsController.GetProduct (Case_1_2) in 38.9177ms
2025-09-21 22:53:47.398 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.ProductsController.GetProduct (Case_1_2)'
2025-09-21 22:53:47.398 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/api/products/1 - 200 null application/json; charset=utf-8 43.9733ms
2025-09-21 22:53:53.852 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5125/api/auth/register - application/json 142
2025-09-21 22:53:53.854 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.AuthController.Register (Case_1_2)'
2025-09-21 22:53:53.855 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto]] Register(Case_1_2.Core.Application.DTOs.Auth.RegisterDto) on controller Case_1_2.API.Controllers.AuthController (Case_1_2).
2025-09-21 22:53:53.873 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Username_0='?', @__request_Email_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."Email", u."FirstName", u."IsActive", u."LastName", u."PasswordHash", u."UpdatedAt", u."Username"
FROM "Users" AS u
WHERE u."Username" = @__request_Username_0 OR u."Email" = @__request_Email_1
LIMIT 1
2025-09-21 22:53:54.112 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("CreatedAt", "Email", "FirstName", "IsActive", "LastName", "PasswordHash", "UpdatedAt", "Username")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-09-21 22:53:54.119 +03:00 [INF] New user registered: testuser
2025-09-21 22:53:54.137 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "ExpiryDate", "IsRevoked", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-09-21 22:53:54.138 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto'.
2025-09-21 22:53:54.143 +03:00 [INF] Executed action Case_1_2.API.Controllers.AuthController.Register (Case_1_2) in 287.976ms
2025-09-21 22:53:54.143 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.AuthController.Register (Case_1_2)'
2025-09-21 22:53:54.143 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5125/api/auth/register - 201 null application/json; charset=utf-8 291.0381ms
2025-09-21 22:54:05.324 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5125/api/auth/login - application/json 67
2025-09-21 22:54:05.325 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.AuthController.Login (Case_1_2)'
2025-09-21 22:54:05.326 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto]] Login(Case_1_2.Core.Application.DTOs.Auth.LoginDto) on controller Case_1_2.API.Controllers.AuthController (Case_1_2).
2025-09-21 22:54:05.332 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UsernameOrEmail_0='?', @__request_UsernameOrEmail_0_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."Email", u."FirstName", u."IsActive", u."LastName", u."PasswordHash", u."UpdatedAt", u."Username"
FROM "Users" AS u
WHERE (u."Username" = @__request_UsernameOrEmail_0 OR u."Email" = @__request_UsernameOrEmail_0_1) AND u."IsActive"
LIMIT 1
2025-09-21 22:54:05.530 +03:00 [INF] User logged in successfully: testuser
2025-09-21 22:54:05.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedAt", r."ExpiryDate", r."IsRevoked", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."UserId" = @__user_Id_0
2025-09-21 22:54:05.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?', @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RefreshTokens"
WHERE "Id" = @p0;
INSERT INTO "RefreshTokens" ("CreatedAt", "ExpiryDate", "IsRevoked", "Token", "UserId")
VALUES (@p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-09-21 22:54:05.541 +03:00 [INF] Executing OkObjectResult, writing value of type 'Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto'.
2025-09-21 22:54:05.541 +03:00 [INF] Executed action Case_1_2.API.Controllers.AuthController.Login (Case_1_2) in 214.7705ms
2025-09-21 22:54:05.541 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.AuthController.Login (Case_1_2)'
2025-09-21 22:54:05.541 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5125/api/auth/login - 200 null application/json; charset=utf-8 217.069ms
2025-09-21 22:54:15.367 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5125/api/products - application/json 146
2025-09-21 22:54:15.382 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.ProductsController.CreateProduct (Case_1_2)'
2025-09-21 22:54:15.383 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.ProductDto]] CreateProduct(Case_1_2.Core.Application.DTOs.CreateProductDto) on controller Case_1_2.API.Controllers.ProductsController (Case_1_2).
2025-09-21 22:54:15.387 +03:00 [INF] Creating new product: Test Product
2025-09-21 22:54:15.392 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Decimal), @p5='?' (DbType = Int32), @p6='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Category", "CreatedAt", "Description", "Name", "Price", "Stock", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2025-09-21 22:54:15.398 +03:00 [INF] Product created and cache invalidated
2025-09-21 22:54:15.399 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Case_1_2.Core.Application.DTOs.ProductDto'.
2025-09-21 22:54:15.399 +03:00 [INF] Executed action Case_1_2.API.Controllers.ProductsController.CreateProduct (Case_1_2) in 16.0314ms
2025-09-21 22:54:15.399 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.ProductsController.CreateProduct (Case_1_2)'
2025-09-21 22:54:15.399 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5125/api/products - 201 null application/json; charset=utf-8 31.7781ms
2025-09-21 22:54:25.054 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/api/products - null null
2025-09-21 22:54:25.054 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 22:54:25.055 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Case_1_2.Core.Application.DTOs.ProductDto]]] GetProducts() on controller Case_1_2.API.Controllers.ProductsController (Case_1_2).
2025-09-21 22:54:25.055 +03:00 [INF] Getting all products
2025-09-21 22:54:25.055 +03:00 [INF] Products not found in cache, retrieving from database
2025-09-21 22:54:25.057 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."Stock", p."UpdatedAt"
FROM "Products" AS p
ORDER BY p."Name"
2025-09-21 22:54:25.058 +03:00 [INF] Products cached for 5 minutes
2025-09-21 22:54:25.058 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Case_1_2.Core.Application.DTOs.ProductDto, Case_1_2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-21 22:54:25.058 +03:00 [INF] Executed action Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2) in 3.3975ms
2025-09-21 22:54:25.058 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 22:54:25.058 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/api/products - 200 null application/json; charset=utf-8 4.1689ms
2025-09-21 23:07:31.421 +03:00 [INF] Application is shutting down...
eters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-09-21 23:05:40.101 +03:00 [INF] User profile is available. Using '/Users/ekremsekmen/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-09-21 23:05:40.122 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5125: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-21 23:07:37.505 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-09-21 23:07:37.528 +03:00 [INF] User profile is available. Using '/Users/ekremsekmen/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-09-21 23:07:37.546 +03:00 [INF] Now listening on: http://localhost:5125
2025-09-21 23:07:37.546 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-21 23:07:37.547 +03:00 [INF] Hosting environment: Development
2025-09-21 23:07:37.547 +03:00 [INF] Content root path: /Users/ekremsekmen/mycodes/Case_1_2
2025-09-21 23:13:51.443 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/ - null null
2025-09-21 23:13:51.455 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/ - 301 0 null 13.2276ms
2025-09-21 23:13:51.458 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/index.html - null null
2025-09-21 23:13:51.532 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/index.html - 200 null text/html;charset=utf-8 73.4385ms
2025-09-21 23:13:51.903 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/swagger-ui.css - null null
2025-09-21 23:13:51.905 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/swagger-ui-standalone-preset.js - null null
2025-09-21 23:13:51.905 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/swagger-ui-bundle.js - null null
2025-09-21 23:13:51.924 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-09-21 23:13:51.924 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-09-21 23:13:51.924 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-09-21 23:13:51.925 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/swagger-ui.css - 200 152034 text/css 22.3648ms
2025-09-21 23:13:51.925 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/swagger-ui-bundle.js - 200 1456926 text/javascript 19.9518ms
2025-09-21 23:13:51.925 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/swagger-ui-standalone-preset.js - 200 230280 text/javascript 19.9521ms
2025-09-21 23:13:52.017 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/favicon-32x32.png - null null
2025-09-21 23:13:52.017 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/favicon-16x16.png - null null
2025-09-21 23:13:52.019 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-09-21 23:13:52.019 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-09-21 23:13:52.019 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/favicon-32x32.png - 200 628 image/png 2.2114ms
2025-09-21 23:13:52.019 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/favicon-16x16.png - 200 665 image/png 2.2197ms
2025-09-21 23:13:52.025 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/swagger/v1/swagger.json - null null
2025-09-21 23:13:52.081 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.2049ms
2025-09-21 23:14:16.975 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5125/api/Auth/login - application/json 57
2025-09-21 23:14:16.979 +03:00 [WRN] Failed to determine the https port for redirect.
2025-09-21 23:14:16.980 +03:00 [INF] CORS policy execution successful.
2025-09-21 23:14:16.999 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.AuthController.Login (Case_1_2)'
2025-09-21 23:14:17.011 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto]] Login(Case_1_2.Core.Application.DTOs.Auth.LoginDto) on controller Case_1_2.API.Controllers.AuthController (Case_1_2).
2025-09-21 23:14:17.166 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_UsernameOrEmail_0='?', @__request_UsernameOrEmail_0_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."Email", u."FirstName", u."IsActive", u."LastName", u."PasswordHash", u."UpdatedAt", u."Username"
FROM "Users" AS u
WHERE (u."Username" = @__request_UsernameOrEmail_0 OR u."Email" = @__request_UsernameOrEmail_0_1) AND u."IsActive"
LIMIT 1
2025-09-21 23:14:17.169 +03:00 [WRN] Login attempt with invalid username/email: string
2025-09-21 23:14:17.169 +03:00 [WRN] Login failed: Invalid credentials
System.UnauthorizedAccessException: Invalid credentials
   at Case_1_2.Core.Application.Handlers.Auth.LoginCommandHandler.Handle(LoginCommand request, CancellationToken cancellationToken) in /Users/ekremsekmen/mycodes/Case_1_2/Core/Application/Handlers/Auth/LoginCommandHandler.cs:line 39
   at Case_1_2.API.Controllers.AuthController.Login(LoginDto loginDto) in /Users/ekremsekmen/mycodes/Case_1_2/API/Controllers/AuthController.cs:line 88
2025-09-21 23:14:17.172 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-09-21 23:14:17.175 +03:00 [INF] Executed action Case_1_2.API.Controllers.AuthController.Login (Case_1_2) in 163.65ms
2025-09-21 23:14:17.175 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.AuthController.Login (Case_1_2)'
2025-09-21 23:14:17.177 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5125/api/Auth/login - 401 null application/json; charset=utf-8 201.6733ms
2025-09-21 23:14:40.629 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5125/api/Auth/register - application/json 130
2025-09-21 23:14:40.631 +03:00 [INF] CORS policy execution successful.
2025-09-21 23:14:40.632 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.AuthController.Register (Case_1_2)'
2025-09-21 23:14:40.636 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto]] Register(Case_1_2.Core.Application.DTOs.Auth.RegisterDto) on controller Case_1_2.API.Controllers.AuthController (Case_1_2).
2025-09-21 23:14:40.677 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_Username_0='?', @__request_Email_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."Email", u."FirstName", u."IsActive", u."LastName", u."PasswordHash", u."UpdatedAt", u."Username"
FROM "Users" AS u
WHERE u."Username" = @__request_Username_0 OR u."Email" = @__request_Email_1
LIMIT 1
2025-09-21 23:14:40.928 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Boolean), @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("CreatedAt", "Email", "FirstName", "IsActive", "LastName", "PasswordHash", "UpdatedAt", "Username")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-09-21 23:14:40.935 +03:00 [INF] New user registered: string
2025-09-21 23:14:40.952 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("CreatedAt", "ExpiryDate", "IsRevoked", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-09-21 23:14:40.954 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto'.
2025-09-21 23:14:40.960 +03:00 [INF] Executed action Case_1_2.API.Controllers.AuthController.Register (Case_1_2) in 323.6811ms
2025-09-21 23:14:40.960 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.AuthController.Register (Case_1_2)'
2025-09-21 23:14:40.960 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5125/api/Auth/register - 201 null application/json; charset=utf-8 331.1102ms
2025-09-21 23:15:05.436 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5125/api/Auth/login - application/json 57
2025-09-21 23:15:05.436 +03:00 [INF] CORS policy execution successful.
2025-09-21 23:15:05.438 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.AuthController.Login (Case_1_2)'
2025-09-21 23:15:05.438 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto]] Login(Case_1_2.Core.Application.DTOs.Auth.LoginDto) on controller Case_1_2.API.Controllers.AuthController (Case_1_2).
2025-09-21 23:15:05.445 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_UsernameOrEmail_0='?', @__request_UsernameOrEmail_0_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."Email", u."FirstName", u."IsActive", u."LastName", u."PasswordHash", u."UpdatedAt", u."Username"
FROM "Users" AS u
WHERE (u."Username" = @__request_UsernameOrEmail_0 OR u."Email" = @__request_UsernameOrEmail_0_1) AND u."IsActive"
LIMIT 1
2025-09-21 23:15:05.662 +03:00 [INF] User logged in successfully: string
2025-09-21 23:15:05.666 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedAt", r."ExpiryDate", r."IsRevoked", r."Token", r."UserId"
FROM "RefreshTokens" AS r
WHERE r."UserId" = @__user_Id_0
2025-09-21 23:15:05.673 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Boolean), @p4='?', @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RefreshTokens"
WHERE "Id" = @p0;
INSERT INTO "RefreshTokens" ("CreatedAt", "ExpiryDate", "IsRevoked", "Token", "UserId")
VALUES (@p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-09-21 23:15:05.678 +03:00 [INF] Executing OkObjectResult, writing value of type 'Case_1_2.Core.Application.DTOs.Auth.AuthResponseDto'.
2025-09-21 23:15:05.678 +03:00 [INF] Executed action Case_1_2.API.Controllers.AuthController.Login (Case_1_2) in 239.971ms
2025-09-21 23:15:05.678 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.AuthController.Login (Case_1_2)'
2025-09-21 23:15:05.679 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5125/api/Auth/login - 200 null application/json; charset=utf-8 243.1639ms
2025-09-21 23:15:21.399 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/api/Auth/profile - null null
2025-09-21 23:15:21.403 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-21 23:15:21.406 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-21 23:15:21.407 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/api/Auth/profile - 401 0 null 7.9558ms
2025-09-21 23:15:49.643 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/api/Products - null null
2025-09-21 23:15:49.644 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 23:15:49.646 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Case_1_2.Core.Application.DTOs.ProductDto]]] GetProducts() on controller Case_1_2.API.Controllers.ProductsController (Case_1_2).
2025-09-21 23:15:49.703 +03:00 [INF] Getting all products via CQRS
2025-09-21 23:15:49.704 +03:00 [INF] Handling GetAllProductsQuery with UseCache: true
2025-09-21 23:15:49.715 +03:00 [INF] Products not found in cache, retrieving from database
2025-09-21 23:15:49.720 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Category", p."CreatedAt", p."Description", p."Name", p."Price", p."Stock", p."UpdatedAt"
FROM "Products" AS p
ORDER BY p."Name"
2025-09-21 23:15:49.734 +03:00 [INF] Products cached for 5 minutes
2025-09-21 23:15:49.734 +03:00 [INF] Successfully retrieved 3 products
2025-09-21 23:15:49.735 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Case_1_2.Core.Application.DTOs.ProductDto, Case_1_2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-21 23:15:49.735 +03:00 [INF] Executed action Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2) in 88.4494ms
2025-09-21 23:15:49.735 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 23:15:49.735 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/api/Products - 200 null application/json; charset=utf-8 92.3063ms
2025-09-21 23:15:52.053 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5125/api/Products - null null
2025-09-21 23:15:52.054 +03:00 [INF] Executing endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 23:15:52.054 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[Case_1_2.Core.Application.DTOs.ProductDto]]] GetProducts() on controller Case_1_2.API.Controllers.ProductsController (Case_1_2).
2025-09-21 23:15:52.056 +03:00 [INF] Getting all products via CQRS
2025-09-21 23:15:52.056 +03:00 [INF] Handling GetAllProductsQuery with UseCache: true
2025-09-21 23:15:52.065 +03:00 [INF] Products retrieved from cache
2025-09-21 23:15:52.065 +03:00 [INF] Successfully retrieved 3 products
2025-09-21 23:15:52.066 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Case_1_2.Core.Application.DTOs.ProductDto, Case_1_2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-21 23:15:52.066 +03:00 [INF] Executed action Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2) in 11.2776ms
2025-09-21 23:15:52.066 +03:00 [INF] Executed endpoint 'Case_1_2.API.Controllers.ProductsController.GetProducts (Case_1_2)'
2025-09-21 23:15:52.066 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5125/api/Products - 200 null application/json; charset=utf-8 12.9834ms
2025-09-21 23:18:05.874 +03:00 [INF] Application is shutting down...
